generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Project {
  id            String               @id @default(cuid())
  order         Int?                 @default(0)
  image         String
  title         String
  description   String
  editorContent String?
  tag           String?
  role          String
  isPublished   Boolean              @default(false)
  stack         String
  githubLink    String?
  previewLink   String?
  createdAt     DateTime             @default(now())
  updatedAt     DateTime             @updatedAt
  translations  ProjectTranslation[] // <— علاقة بالترجمات
  gallery       Gallery[]
}

model ProjectTranslation {
  id            String  @id @default(cuid())
  projectId     String
  order         Int?    @default(0)
  language      String  @db.VarChar(8) // "en", "ar", ... ديناميكي
  title         String
  description   String?
  editorContent String?
  tag           String?

  project Project @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@unique([projectId, language]) // ترجمة واحدة لكل لغة لكل مشروع
  @@index([projectId])
  @@index([language])
}

model Gallery {
  id        String  @id @default(cuid())
  order     Int?    @default(0)
  url       String
  projectId String
  project   Project @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model Skill {
  id           String             @id @default(cuid())
  order        Int?               @default(0)
  image        String
  title        String
  createdAt    DateTime           @default(now())
  updatedAt    DateTime?          @updatedAt
  translations SkillTranslation[] // ترجمات المهارة
}

model SkillTranslation {
  id       String @id @default(cuid())
  skillId  String
  language String @db.VarChar(8) // "en", "ar", ...
  title    String

  skill Skill @relation(fields: [skillId], references: [id], onDelete: Cascade)

  @@unique([skillId, language])
  @@index([skillId])
  @@index([language])
}
